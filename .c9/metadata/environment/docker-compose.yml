{"filter":false,"title":"docker-compose.yml","tooltip":"/docker-compose.yml","undoManager":{"mark":19,"position":19,"stack":[[{"start":{"row":0,"column":0},"end":{"row":80,"column":56},"action":"insert","lines":["version: '3.6'","","services:","","  nginx:","    build:","      context: ./services/nginx","      dockerfile: Dockerfile-dev","    restart: always","    volumes:","      - \"./data/certbot/conf:/etc/letsencrypt\"","      - \"./data/certbot/www:/var/www/certbot\"","      - \"./services/portal/portal/static:/static\"","      - \"./services/portal/media:/media\"","    ports:","      - 80:80","      - 443:443","    command: \"/bin/sh -c 'while :; do sleep 6h & wait $${!}; nginx -s reload; done & nginx -g \\\"daemon off;\\\"'\"","    depends_on:","      - portal","      ","  portal:","    build:","      context: ./services/portal","      dockerfile: Dockerfile-dev","    restart: on-failure","    command: gunicorn --bind 0.0.0.0:8000 --timeout 120 --workers 2 portal.wsgi","    volumes:","      - './services/portal:/usr/src/app'","    ports:","      - \"8000:8000\"","    environment:","      - PYTHONUNBUFFERED=0","    depends_on:","      - client-db","      - mongo-db","      ","  celery:","    build:","      context: ./services/portal","      dockerfile: Dockerfile-dev","    command: celery -A portal worker -l info","    depends_on:","      - client-db","      - redis","      - portal","      ","  client-db:","    build:","      context: ./services/client-db","      dockerfile: Dockerfile","    ports:","      - \"5435:5432\"","    environment:","     - POSTGRES_USER=estudai","     - POSTGRES_PASSWORD=p0rt4l3stud41","     ","  certbot:","     image: certbot/certbot","     volumes:","       - \"./data/certbot/conf:/etc/letsencrypt\"","       - \"./data/certbot/www:/var/www/certbot\"","     entrypoint: \"/bin/sh -c 'trap exit TERM; while :; do certbot renew; sleep 12h & wait $${!}; done;'\"","     ","  redis:","    build:","      context: ./services/redis","      dockerfile: Dockerfile","      ","  mongo-db:","    build:","      context: ./services/mongo-db","      dockerfile: Dockerfile","    command:","      - '-f'","      - '/etc/mongod.conf'","    ports:","      - 27017:27017","    environment:","      - MONGO_INITDB_ROOT_USERNAME=estudaai","      - MONGO_INITDB_ROOT_PASSWORD=357ud441m0ng0d474b453"],"id":1}],[{"start":{"row":7,"column":31},"end":{"row":7,"column":32},"action":"remove","lines":["v"],"id":2},{"start":{"row":7,"column":30},"end":{"row":7,"column":31},"action":"remove","lines":["e"]},{"start":{"row":7,"column":29},"end":{"row":7,"column":30},"action":"remove","lines":["d"]},{"start":{"row":7,"column":28},"end":{"row":7,"column":29},"action":"remove","lines":["-"]}],[{"start":{"row":19,"column":8},"end":{"row":19,"column":14},"action":"remove","lines":["portal"],"id":3},{"start":{"row":19,"column":8},"end":{"row":19,"column":9},"action":"insert","lines":["s"]},{"start":{"row":19,"column":9},"end":{"row":19,"column":10},"action":"insert","lines":["a"]}],[{"start":{"row":19,"column":9},"end":{"row":19,"column":10},"action":"remove","lines":["a"],"id":4}],[{"start":{"row":19,"column":9},"end":{"row":19,"column":10},"action":"insert","lines":["p"],"id":5},{"start":{"row":19,"column":10},"end":{"row":19,"column":11},"action":"insert","lines":["a"]},{"start":{"row":19,"column":11},"end":{"row":19,"column":12},"action":"insert","lines":["c"]},{"start":{"row":19,"column":12},"end":{"row":19,"column":13},"action":"insert","lines":["e"]},{"start":{"row":19,"column":13},"end":{"row":19,"column":14},"action":"insert","lines":["a"]}],[{"start":{"row":19,"column":14},"end":{"row":19,"column":15},"action":"insert","lines":["p"],"id":6},{"start":{"row":19,"column":15},"end":{"row":19,"column":16},"action":"insert","lines":["s"]}],[{"start":{"row":19,"column":15},"end":{"row":19,"column":16},"action":"remove","lines":["s"],"id":7}],[{"start":{"row":19,"column":15},"end":{"row":19,"column":16},"action":"insert","lines":["p"],"id":8},{"start":{"row":19,"column":16},"end":{"row":19,"column":17},"action":"insert","lines":["s"]}],[{"start":{"row":23,"column":26},"end":{"row":23,"column":32},"action":"remove","lines":["portal"],"id":9},{"start":{"row":23,"column":26},"end":{"row":23,"column":27},"action":"insert","lines":["s"]},{"start":{"row":23,"column":27},"end":{"row":23,"column":28},"action":"insert","lines":["p"]},{"start":{"row":23,"column":28},"end":{"row":23,"column":29},"action":"insert","lines":["a"]},{"start":{"row":23,"column":29},"end":{"row":23,"column":30},"action":"insert","lines":["c"]}],[{"start":{"row":23,"column":26},"end":{"row":23,"column":30},"action":"remove","lines":["spac"],"id":10},{"start":{"row":23,"column":26},"end":{"row":23,"column":35},"action":"insert","lines":["spaceapps"]}],[{"start":{"row":21,"column":2},"end":{"row":21,"column":8},"action":"remove","lines":["portal"],"id":11},{"start":{"row":21,"column":2},"end":{"row":21,"column":11},"action":"insert","lines":["spaceapps"]}],[{"start":{"row":24,"column":31},"end":{"row":24,"column":32},"action":"remove","lines":["v"],"id":12},{"start":{"row":24,"column":30},"end":{"row":24,"column":31},"action":"remove","lines":["e"]},{"start":{"row":24,"column":29},"end":{"row":24,"column":30},"action":"remove","lines":["d"]},{"start":{"row":24,"column":28},"end":{"row":24,"column":29},"action":"remove","lines":["-"]}],[{"start":{"row":28,"column":20},"end":{"row":28,"column":26},"action":"remove","lines":["portal"],"id":13},{"start":{"row":28,"column":20},"end":{"row":28,"column":29},"action":"insert","lines":["spaceapps"]}],[{"start":{"row":37,"column":0},"end":{"row":46,"column":0},"action":"remove","lines":["  celery:","    build:","      context: ./services/portal","      dockerfile: Dockerfile-dev","    command: celery -A portal worker -l info","    depends_on:","      - client-db","      - redis","      - portal",""],"id":14}],[{"start":{"row":45,"column":21},"end":{"row":45,"column":28},"action":"remove","lines":["estudai"],"id":15},{"start":{"row":45,"column":21},"end":{"row":45,"column":30},"action":"insert","lines":["spaceapps"]}],[{"start":{"row":46,"column":25},"end":{"row":46,"column":38},"action":"remove","lines":["p0rt4l3stud41"],"id":16},{"start":{"row":46,"column":25},"end":{"row":46,"column":26},"action":"insert","lines":["s"]},{"start":{"row":46,"column":26},"end":{"row":46,"column":27},"action":"insert","lines":["p"]},{"start":{"row":46,"column":27},"end":{"row":46,"column":28},"action":"insert","lines":["@"]}],[{"start":{"row":46,"column":28},"end":{"row":46,"column":29},"action":"insert","lines":["c"],"id":17},{"start":{"row":46,"column":29},"end":{"row":46,"column":30},"action":"insert","lines":["3"]},{"start":{"row":46,"column":30},"end":{"row":46,"column":31},"action":"insert","lines":["@"]}],[{"start":{"row":46,"column":31},"end":{"row":46,"column":32},"action":"insert","lines":["p"],"id":18},{"start":{"row":46,"column":32},"end":{"row":46,"column":33},"action":"insert","lines":["p"]},{"start":{"row":46,"column":33},"end":{"row":46,"column":34},"action":"insert","lines":["5"]}],[{"start":{"row":54,"column":5},"end":{"row":71,"column":56},"action":"remove","lines":["","  redis:","    build:","      context: ./services/redis","      dockerfile: Dockerfile","      ","  mongo-db:","    build:","      context: ./services/mongo-db","      dockerfile: Dockerfile","    command:","      - '-f'","      - '/etc/mongod.conf'","    ports:","      - 27017:27017","    environment:","      - MONGO_INITDB_ROOT_USERNAME=estudaai","      - MONGO_INITDB_ROOT_PASSWORD=357ud441m0ng0d474b453"],"id":19}],[{"start":{"row":53,"column":104},"end":{"row":54,"column":5},"action":"remove","lines":["","     "],"id":20}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":35,"column":16},"end":{"row":35,"column":16},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1571485826461,"hash":"655e4ba3f226d5229bd4ffbe1432b578c805308a"}